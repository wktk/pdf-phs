(function(){var t={1216:function(t,n,e){"use strict";var r=e(9963),o=e(6252);const a={id:"app"},i=(0,o._)("h1",null,"PDF にノイズを乗せる β",-1),u=(0,o._)("button",{id:"upload",onclick:"document.getElementById('file').click()"}," PDF ファイルを選択... ",-1),c=(0,o._)("div",{class:"notice"},[(0,o._)("ul",null,[(0,o._)("li",null," PDF ファイルにランダムにノイズと歪みを追加してスキャン風にします "),(0,o._)("li",null,"ブラウザ上で動作するのでデータがネットワークを経由しません"),(0,o._)("li",null,"A4 縦 PDF のみ対応 (今のところ)"),(0,o._)("li",null,"出力は白黒になります (今のところ)")])],-1),f=(0,o._)("h2",null,"出力例",-1),l=(0,o._)("hr",{class:"separator"},null,-1),s=(0,o._)("address",null,[(0,o._)("a",{href:"https://wktk.jp/"},"wktk.jp"),(0,o.Uk)(" · "),(0,o._)("a",{href:"https://twitter.com/wk"},"@wk")],-1);function d(t,n,e,d,p,h){const m=(0,o.up)("Tweet"),v=(0,o.up)("ForkMe");return(0,o.wg)(),(0,o.iD)("div",a,[i,u,(0,o._)("input",{id:"file",type:"file",name:"file",accept:"application/pdf,.pdf",onChange:n[0]||(n[0]=(0,r.iM)(((...n)=>t.convert&&t.convert(...n)),["prevent"]))},null,32),c,f,(0,o.Wm)(m,{class:"tweet","tweet-id":"1272963828490231808",conversation:"none"}),l,s,(0,o.Wm)(v)])}e(1439),e(7585),e(5315);var p=e(9299),h=e(4730),m=e(8179);const v={id:"forkongithub"},g=(0,o._)("a",{href:"https://github.com/wktk/pdf-phs"}," Fork me on GitHub ",-1),w=[g];function b(t,n,e,r,a,i){return(0,o.wg)(),(0,o.iD)("span",v,w)}var y=(0,o.aZ)({name:"ForkMe"}),k=e(3744);const _=(0,k.Z)(y,[["render",b]]);var O=_;p.GlobalWorkerOptions.workerSrc=e(9016);const j=t=>new Promise(((n,e)=>{const r=new FileReader;r.onload=()=>n(new Uint8Array(r.result)),r.onerror=e,r.readAsArrayBuffer(t)}));var P=(0,o.aZ)({name:"App",components:{ForkMe:O,Tweet:m.Z},methods:{convert:async t=>{const n=t.target?.files,e=n&&n[0];if(!e)throw"Invalid file";const r=await j(e),o=await p.getDocument(r).promise,a="portrait",i="a4",u=new h.ZP({orientation:a,format:i,unit:"mm"});for(let c=1;c<=o.numPages;c++){const t=await o.getPage(c),n=document.createElement("canvas"),e=t.getViewport({scale:3});n.height=e.height,n.width=e.width;const r=n.getContext("2d",{alpha:!1});if(!r)throw"Canvas is null";const f=.008;r.setTransform(Math.random()*f-f/2+1,Math.random()*f-f/2,Math.random()*f-f/2,Math.random()*f-f/2+1,0,0),await t.render({canvasContext:r,viewport:e}).promise;const l=r.getImageData(0,0,e.width,e.height);for(let o=0;o<l.data.length;o+=4){const t=l.data[o]+l.data[o+1]+l.data[o+2],n=t>255*(1-.8*Math.random())*3;l.data[o]=l.data[o+1]=l.data[o+2]=n?255:0}r.putImageData(l,0,0),1!==c&&u.addPage(i,a),u.addImage(n,"JPEG",0,0,210,297)}u.save(e.name.replace(/.pdf$/i,"-scan.pdf"))}}});const M=(0,k.Z)(P,[["render",d]]);var F=M;(0,r.ri)(F).mount("#app")},3414:function(){},172:function(){},2001:function(){},3779:function(){},6558:function(){},2258:function(){}},n={};function e(r){var o=n[r];if(void 0!==o)return o.exports;var a=n[r]={exports:{}};return t[r].call(a.exports,a,a.exports,e),a.exports}e.m=t,function(){var t=[];e.O=function(n,r,o,a){if(!r){var i=1/0;for(l=0;l<t.length;l++){r=t[l][0],o=t[l][1],a=t[l][2];for(var u=!0,c=0;c<r.length;c++)(!1&a||i>=a)&&Object.keys(e.O).every((function(t){return e.O[t](r[c])}))?r.splice(c--,1):(u=!1,a<i&&(i=a));if(u){t.splice(l--,1);var f=o();void 0!==f&&(n=f)}}return n}a=a||0;for(var l=t.length;l>0&&t[l-1][2]>a;l--)t[l]=t[l-1];t[l]=[r,o,a]}}(),function(){var t,n=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__};e.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var a=Object.create(null);e.r(a);var i={};t=t||[null,n({}),n([]),n(n)];for(var u=2&o&&r;"object"==typeof u&&!~t.indexOf(u);u=n(u))Object.getOwnPropertyNames(u).forEach((function(t){i[t]=function(){return r[t]}}));return i["default"]=function(){return r},e.d(a,i),a}}(),function(){e.d=function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})}}(),function(){e.f={},e.e=function(t){return Promise.all(Object.keys(e.f).reduce((function(n,r){return e.f[r](t,n),n}),[]))}}(),function(){e.u=function(t){return"js/"+t+"."+{43:"d972dfad",120:"9fc1c9ac",856:"f90ace49"}[t]+".js"}}(),function(){e.miniCssF=function(t){}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)}}(),function(){var t={},n="pdf-phs:";e.l=function(r,o,a,i){if(t[r])t[r].push(o);else{var u,c;if(void 0!==a)for(var f=document.getElementsByTagName("script"),l=0;l<f.length;l++){var s=f[l];if(s.getAttribute("src")==r||s.getAttribute("data-webpack")==n+a){u=s;break}}u||(c=!0,u=document.createElement("script"),u.charset="utf-8",u.timeout=120,e.nc&&u.setAttribute("nonce",e.nc),u.setAttribute("data-webpack",n+a),u.src=r),t[r]=[o];var d=function(n,e){u.onerror=u.onload=null,clearTimeout(p);var o=t[r];if(delete t[r],u.parentNode&&u.parentNode.removeChild(u),o&&o.forEach((function(t){return t(e)})),n)return n(e)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=d.bind(null,u.onerror),u.onload=d.bind(null,u.onload),c&&document.head.appendChild(u)}}}(),function(){e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){e.p=""}(),function(){var t={143:0};e.f.j=function(n,r){var o=e.o(t,n)?t[n]:void 0;if(0!==o)if(o)r.push(o[2]);else{var a=new Promise((function(e,r){o=t[n]=[e,r]}));r.push(o[2]=a);var i=e.p+e.u(n),u=new Error,c=function(r){if(e.o(t,n)&&(o=t[n],0!==o&&(t[n]=void 0),o)){var a=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;u.message="Loading chunk "+n+" failed.\n("+a+": "+i+")",u.name="ChunkLoadError",u.type=a,u.request=i,o[1](u)}};e.l(i,c,"chunk-"+n,n)}},e.O.j=function(n){return 0===t[n]};var n=function(n,r){var o,a,i=r[0],u=r[1],c=r[2],f=0;if(i.some((function(n){return 0!==t[n]}))){for(o in u)e.o(u,o)&&(e.m[o]=u[o]);if(c)var l=c(e)}for(n&&n(r);f<i.length;f++)a=i[f],e.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return e.O(l)},r=self["webpackChunkpdf_phs"]=self["webpackChunkpdf_phs"]||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))}();var r=e.O(void 0,[998],(function(){return e(1216)}));r=e.O(r)})();
//# sourceMappingURL=app.8c6c11b9.js.map